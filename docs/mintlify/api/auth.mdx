---
title: 'Authentication API'
description: 'Authentication and authorization API functions for the BuildAppsWith platform'
---

# Authentication API

The Authentication API provides client-side functions for handling user authentication, authorization, and session management using Clerk.

## Core Features

- **User Authentication**: Sign-up, sign-in, and sign-out functionality
- **Session Management**: Managing and validating user sessions
- **Role-Based Access Control**: Authorization based on user roles
- **Error Handling**: Standardized authentication error handling

## API Reference

### Authentication

<ResponseField name="signIn" type="function">
  Authenticate a user with email and password
  
  ```typescript
  async function signIn(
    email: string,
    password: string
  ): Promise<SignInResult>
  ```

  <Expandable title="Parameters">
    <ResponseField name="email" type="string">
      The user's email address
    </ResponseField>
    <ResponseField name="password" type="string">
      The user's password
    </ResponseField>
  </Expandable>

  <Expandable title="Returns">
    <ResponseField name="SignInResult">
      ```typescript
      {
        success: boolean;
        userId?: string;
        error?: string;
      }
      ```
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="signOut" type="function">
  Sign the current user out
  
  ```typescript
  async function signOut(): Promise<void>
  ```
</ResponseField>

### Session Management

<ResponseField name="getServerAuth" type="function">
  Get authentication state from server context
  
  ```typescript
  function getServerAuth(): ServerAuth
  ```

  <Expandable title="Returns">
    <ResponseField name="ServerAuth">
      ```typescript
      {
        userId: string;
        session: Session;
        user: User;
        isAuthenticated: boolean;
        isAdmin: boolean;
        hasRole: (role: UserRole) => boolean;
      }
      ```
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="requireAuth" type="function">
  Higher-order function that requires authentication
  
  ```typescript
  function requireAuth<T>(
    handler: (req: NextRequest, auth: ServerAuth) => Promise<T>,
    options?: AuthOptions
  ): (req: NextRequest) => Promise<T | Response>
  ```

  <Expandable title="Parameters">
    <ResponseField name="handler" type="function">
      The API route handler function
    </ResponseField>
    <ResponseField name="options" type="AuthOptions">
      Optional authentication options
    </ResponseField>
  </Expandable>
</ResponseField>

### Role-Based Access Control

<ResponseField name="requireRole" type="function">
  Higher-order function that requires a specific role
  
  ```typescript
  function requireRole<T>(
    role: UserRole,
    handler: (req: NextRequest, auth: ServerAuth) => Promise<T>,
    options?: AuthOptions
  ): (req: NextRequest) => Promise<T | Response>
  ```

  <Expandable title="Parameters">
    <ResponseField name="role" type="UserRole">
      The required role
    </ResponseField>
    <ResponseField name="handler" type="function">
      The API route handler function
    </ResponseField>
    <ResponseField name="options" type="AuthOptions">
      Optional authentication options
    </ResponseField>
  </Expandable>
</ResponseField>

## Usage Examples

### Protecting API Routes

```typescript
// app/api/protected/route.ts
import { requireAuth } from '@/lib/auth';
import { NextRequest } from 'next/server';

export const GET = requireAuth(
  async (req: NextRequest, auth) => {
    // This code only runs for authenticated users
    return Response.json({
      message: `Hello, authenticated user ${auth.userId}!`
    });
  }
);
```

### Role-Based Access Control

```typescript
// app/api/admin/route.ts
import { requireRole } from '@/lib/auth';
import { UserRole } from '@/lib/auth/types';
import { NextRequest } from 'next/server';

export const GET = requireRole(
  UserRole.ADMIN,
  async (req: NextRequest, auth) => {
    // This code only runs for admin users
    return Response.json({
      message: 'Hello, admin!'
    });
  }
);
```

### Server Component Authentication

```typescript
// app/profile/page.tsx
import { getServerAuth } from '@/lib/auth';
import { redirect } from 'next/navigation';

export default async function ProfilePage() {
  const auth = getServerAuth();
  
  if (!auth.isAuthenticated) {
    redirect('/login');
  }
  
  return (
    <div>
      <h1>Welcome, {auth.user.firstName}!</h1>
      {/* Profile content */}
    </div>
  );
}
```
